
# Описание сценариев использования приложения

Описание основных сценариев использования приложения реализовано на диаграммах Swim lane, которые дают более ясное представление о распределении действий между исполнителями процесса. Всего реализовано 3 основных сценария: запись и сохранение тренировки, покупка товара, получение персонализированного контента.

## Cценарий №1. Запись и сохранение тренировки
Пользователь запускает тренировку на своем смарт-устройстве, для этого выбирает опцию «Новая тренировка», тип тренировки, может задать продолжительность тренировки/количество подходов/повторений каждого упражнения/расстояние пробежки/скорость/средний пульс/расход калорий. После завершения ввода всех необходимых данных пользователь запускает тренировку. Данные о тренировке синхронизируются в приложении, отправляются на сервер и тренировка сохраняется в профиле пользователя. Если пользователь получил достижение, то информация об этом достижении отправляется пользователю и его подписчикам.

![SWIMLANE_TRAIN](https://github.com/butorovnv/Software-Architecture-Diploma/blob/main/images/SWIMLINE_TRAIN_DIAGRAM.png)

## Cценарий №2: Покупка товара
Пользователь запускает приложение и переходит в каталог товаров. Он просматривает ассортимент спортивных аксессуаров, выбирает понравившийся товар и кладёт его в корзину. Затем нажимает кнопку оформления заказа, подтверждает оформление, вводит адрес, выбирает время доставки и способ оплаты. Приложение отображает итоговую сумму покупки вместе с налогами и доставкой. После успешной оплаты пользователь получает уведомление о статусе своего заказа с информацией о доставке.

![SWIMLANE_SHOP](https://github.com/butorovnv/Software-Architecture-Diploma/blob/main/images/SWIMLINE_SHOP_DIAGRAM.png)

## Cценарий №3. Получение персонального контента 
Приложение запрашивает разрешение на доступ к личным данным пользователя (возраст, пол, предпочтения в видах спорта, тренировочная активность, подписки). Основываясь на полученных данных, оно формирует персонализированные рекомендации по тренировкам, питанию и спортивному инвентарю. Эти рекомендации представлены в виде списка предложений, адаптированных специально под потребности конкретного пользователя. Периодически приложение предлагает обновить персональные настройки, чтобы повысить точность рекомендаций.

![SWIMLINE_SOCIAL_DIAGRAM](https://github.com/butorovnv/Software-Architecture-Diploma/blob/main/images/SWIMLINE_SOCIAL_DIAGRAM.png)


## Cценарий №4. Регистрация и авторизация пользователя 
![SWIMLANE_REGISATRATION](https://github.com/butorovnv/Software-Architecture-Diploma/blob/main/images/SWIMLANE_REGISTRATION.png)


При регистрации, пользователь выбирает один из следующих способов регистрации:
- Электронная почта + пароль
- Телефон и пароль + SMS-код подтверждения
Ползователь вводит данные по выбранному способу регистрации, данные передаеются через API GW в сервис регистрации (перед этим выполняем првоерку на уникальность e-mail, телефона, логина и тд), где сохраняется в БД логин и хэшированный пароль, после чего - пользователю необходимо подтвердить свой аккаунт по ссылке через email или кодом аутентификации через SMS. 
После подтверждения - выдается Access Token и Refresh Token, чтобы не проходить аутентификацию часто

## Cценарий №5. Аутентификация пользователя 
![SWIMLANE_AUTHENTICATION](https://github.com/butorovnv/Software-Architecture-Diploma/blob/main/images/SWIMLANE_AUTHENTICATION.png)
Предусловие: Access Token и Refresh Token истекли и необхдимо получить новые через аутентификацию  

Пользователю доступна аутентификация через биометрию (FaceID, отпечаток пальца, если при регистрации было получено разрешение на использование биометрии)
Если же выбирается ввод через логин/пароль, то вводится ползователем логин/пароль, в сервисе аутентификации пароль перобразовывается hash-функцией и сравнивается с хэшом, сохраненным ранее, выдается новая пара Access Token + Refresh TOke nи пользователь аутентифицируется
Так же есть функция восстановления пароля, где будут отправлены реквизиты на указанный способ коммуникации для восстановленияч доступа (временный пароль + запрос на сохранение новог опароля к существующему логину/email/телефону)
